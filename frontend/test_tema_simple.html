<\!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Test Tema</title>
    <style>
        body { padding: 20px; background: var(--bg); color: var(--text); }
        .card { background: var(--bg-elevated); padding: 20px; margin: 10px 0; border: 2px solid var(--border); }
        .btn { background: var(--button-bg); color: var(--button-text); padding: 10px 20px; margin: 5px; border: none; cursor: pointer; }
        .header { background: var(--header-bg); color: var(--header-text); padding: 15px; }
        #debug { background: #f5f5f5; padding: 15px; font-family: monospace; font-size: 11px; white-space: pre; border: 2px solid #000; }
    </style>
</head>
<body>
    <div class="header"><h1>Test Sistema de Temas</h1></div>
    <div class="card">
        <h2>Prueba de Variables CSS</h2>
        <button class="btn" onclick="test('minimal')">Minimal</button>
        <button class="btn" onclick="test('dark')">Dark</button>
        <button class="btn" onclick="test('eink')">EInk</button>
    </div>
    <div id="debug"></div>
    <script src="/static/branding.js"></script>
    <script>
        function show() {
            const s = getComputedStyle(document.documentElement);
            debug.textContent = 'Variables:\n--bg: "' + s.getPropertyValue('--bg') + '"\n--text: "' + s.getPropertyValue('--text') + '"\n--primary: "' + s.getPropertyValue('--primary') + '"\n\nTema: ' + (localStorage.getItem('aleph70_theme_name') || 'NO') + '\nStyle: ' + \!\!document.getElementById('theme-style');
        }
        async function test(name) {
            const r = await fetch('/static/plantillas/' + name + '.json');
            await applyTheme(await r.json());
            show();
        }
        setTimeout(() => { if(typeof cargarColoresEmpresa === 'function') cargarColoresEmpresa().then(show); else show(); }, 500);
        setInterval(show, 2000);
    </script>
</body>
</html>
